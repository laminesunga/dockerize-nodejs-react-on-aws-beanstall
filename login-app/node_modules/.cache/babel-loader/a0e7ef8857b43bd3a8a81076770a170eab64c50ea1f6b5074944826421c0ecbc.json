{"ast":null,"code":"var _jsxFileName = \"/home/ls10/Documents/CloudSpace/lamineweb/login-app/src/components/Accounts.js\";\nimport React, { createContext } from 'react';\nimport { CognitoUser, AuthenticationDetails } from 'amazon-cognito-identity-js';\nimport Pool from '../UserPool';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AccountContext = /*#__PURE__*/createContext();\nconst Account = props => {\n  const getSession = async () => await new Promise((resolve, reject) => {\n    const user = Pool.getCurrentUser();\n    if (user) {\n      user.getSession((err, session) => {\n        if (err) {\n          reject();\n        } else {\n          resolve(session);\n        }\n      });\n    } else {\n      reject();\n    }\n  });\n  const authenticate = async (Username, Password) => await new Promise((resolve, reject) => {\n    const user = new CognitoUser({\n      Username,\n      Pool\n    });\n    const authDetails = new AuthenticationDetails({\n      Username,\n      Password\n    });\n    user.authenticateUser(authDetails, {\n      onSuccess: data => {\n        console.log('onSuccess:', data);\n        resolve(data);\n      },\n      onFailure: err => {\n        console.error('onFailure:', err);\n        reject(err);\n      },\n      newPasswordRequired: data => {\n        console.log('newPasswordRequired:', data);\n        resolve(data);\n      }\n    });\n  });\n  const curentUser = () => {\n    const user = Pool.getCurrentUser();\n    return user;\n  };\n  const logout = () => {\n    const user = Pool.getCurrentUser();\n    if (user) {\n      console.log('user for log out', user);\n      user.signOut();\n      console.log('user logged out');\n      console.log('user after logout ', user);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AccountContext.Provider, {\n    value: {\n      authenticate,\n      getSession,\n      logout,\n      curentUser\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_c = Account;\nexport { Account, AccountContext };\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","createContext","CognitoUser","AuthenticationDetails","Pool","jsxDEV","_jsxDEV","AccountContext","Account","props","getSession","Promise","resolve","reject","user","getCurrentUser","err","session","authenticate","Username","Password","authDetails","authenticateUser","onSuccess","data","console","log","onFailure","error","newPasswordRequired","curentUser","logout","signOut","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/ls10/Documents/CloudSpace/lamineweb/login-app/src/components/Accounts.js"],"sourcesContent":["import React, { createContext } from 'react';\nimport { CognitoUser, AuthenticationDetails } from 'amazon-cognito-identity-js';\nimport Pool from '../UserPool';\n\nconst AccountContext = createContext();\n\nconst Account = props => {\n  const getSession = async () =>\n    await new Promise((resolve, reject) => {\n      const user = Pool.getCurrentUser();\n      if (user) {\n        user.getSession((err, session) => {\n          if (err) {\n            reject();\n          } else {\n            resolve(session);\n          }\n        });\n      } else {\n        reject();\n      }\n    });\n\n  const authenticate = async (Username, Password) =>\n    await new Promise((resolve, reject) => {\n      const user = new CognitoUser({ Username, Pool });\n      const authDetails = new AuthenticationDetails({ Username, Password });\n\n      user.authenticateUser(authDetails, {\n        onSuccess: data => {\n          console.log('onSuccess:', data);\n          resolve(data);\n        },\n\n        onFailure: err => {\n          console.error('onFailure:', err);\n          reject(err);\n        },\n\n        newPasswordRequired: data => {\n          console.log('newPasswordRequired:', data);\n          resolve(data);\n        }\n      });\n    });\n\n  const curentUser = () => {\n    const user = Pool.getCurrentUser();\n    return user\n\n  }\n  \n  const logout = () => {\n    const user = Pool.getCurrentUser();\n    if (user) {\n      console.log('user for log out',user)\n      user.signOut();\n      console.log('user logged out')\n      console.log('user after logout ',user)\n    }\n  }\n\n  return (\n    <AccountContext.Provider value={{\n      authenticate,\n      getSession,\n      logout,\n      curentUser\n    }}>\n      {props.children}\n    </AccountContext.Provider>\n  );\n};\n\nexport { Account, AccountContext };"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,QAAQ,OAAO;AAC5C,SAASC,WAAW,EAAEC,qBAAqB,QAAQ,4BAA4B;AAC/E,OAAOC,IAAI,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/B,MAAMC,cAAc,gBAAGN,aAAa,EAAE;AAEtC,MAAMO,OAAO,GAAGC,KAAK,IAAI;EACvB,MAAMC,UAAU,GAAG,MAAAA,CAAA,KACjB,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACrC,MAAMC,IAAI,GAAGV,IAAI,CAACW,cAAc,EAAE;IAClC,IAAID,IAAI,EAAE;MACRA,IAAI,CAACJ,UAAU,CAAC,CAACM,GAAG,EAAEC,OAAO,KAAK;QAChC,IAAID,GAAG,EAAE;UACPH,MAAM,EAAE;QACV,CAAC,MAAM;UACLD,OAAO,CAACK,OAAO,CAAC;QAClB;MACF,CAAC,CAAC;IACJ,CAAC,MAAM;MACLJ,MAAM,EAAE;IACV;EACF,CAAC,CAAC;EAEJ,MAAMK,YAAY,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,KAC5C,MAAM,IAAIT,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACrC,MAAMC,IAAI,GAAG,IAAIZ,WAAW,CAAC;MAAEiB,QAAQ;MAAEf;IAAK,CAAC,CAAC;IAChD,MAAMiB,WAAW,GAAG,IAAIlB,qBAAqB,CAAC;MAAEgB,QAAQ;MAAEC;IAAS,CAAC,CAAC;IAErEN,IAAI,CAACQ,gBAAgB,CAACD,WAAW,EAAE;MACjCE,SAAS,EAAEC,IAAI,IAAI;QACjBC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEF,IAAI,CAAC;QAC/BZ,OAAO,CAACY,IAAI,CAAC;MACf,CAAC;MAEDG,SAAS,EAAEX,GAAG,IAAI;QAChBS,OAAO,CAACG,KAAK,CAAC,YAAY,EAAEZ,GAAG,CAAC;QAChCH,MAAM,CAACG,GAAG,CAAC;MACb,CAAC;MAEDa,mBAAmB,EAAEL,IAAI,IAAI;QAC3BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,IAAI,CAAC;QACzCZ,OAAO,CAACY,IAAI,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEJ,MAAMM,UAAU,GAAGA,CAAA,KAAM;IACvB,MAAMhB,IAAI,GAAGV,IAAI,CAACW,cAAc,EAAE;IAClC,OAAOD,IAAI;EAEb,CAAC;EAED,MAAMiB,MAAM,GAAGA,CAAA,KAAM;IACnB,MAAMjB,IAAI,GAAGV,IAAI,CAACW,cAAc,EAAE;IAClC,IAAID,IAAI,EAAE;MACRW,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAACZ,IAAI,CAAC;MACpCA,IAAI,CAACkB,OAAO,EAAE;MACdP,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAC9BD,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAACZ,IAAI,CAAC;IACxC;EACF,CAAC;EAED,oBACER,OAAA,CAACC,cAAc,CAAC0B,QAAQ;IAACC,KAAK,EAAE;MAC9BhB,YAAY;MACZR,UAAU;MACVqB,MAAM;MACND;IACF,CAAE;IAAAK,QAAA,EACC1B,KAAK,CAAC0B;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACS;AAE9B,CAAC;AAACC,EAAA,GAlEIhC,OAAO;AAoEb,SAASA,OAAO,EAAED,cAAc;AAAG,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}